1. ФУНКЦИОНАЛЬНОЕ ОПИСАНИЕ

1.1 ГЛАВА ПЕРВАЯ: Базовый геймлпей (Core gameplay)

1.1.1 Базовое описание
В центре экрана всегда находится персонаж игрока, поверх которого видно его снаряжение, движение происходит перемещением игрового пространства относительно неподвижного персонажа. В левом нижнем углу постоянно виден чат. В правом нижнем углу постоянно виден счётчик здоровья игрока. Игровые меню при их вызове возникают сверху по центру экрана, перекрывая собой игровое пространство.

1.1.2 Базовые абстракции

1.1.2.1 Инвентарь
Инвентарь игрока состоит из 100 слотов, каждый из которых может занимать игровой предмет. При подборе предмета он помещается в один из свободных слотов инвентаря. Предметы можно перемещать между слотами, а помещать в слот брони и слот оружия, а также выбрасывать обратно в игровое пространство (путём перемещения предмета за пределы окна инвентаря). Если свободные слоты закончились, а игрок пытается подобрать предмет, ему должна быть показана ошибка. Если игрок пытается поместить несоотвествующий предмет в слот брони или оружия, он должен просто не помещаться (по клику ничего не происходит).

Помимо предметов снаряжения, инвентарь может также содержать различные игровые валюты. Это единственные предметы инвентаря, имеющие счётчик количества. Каждый вид игровой валюты занимает один слот инвентаря и имеет свой счётчик количества.

Чтобы подобрать предмет оружия или брони, должно быть достаточно коснуться его. Предполагается, что если это было нежелательно, в дальнейшем игрок может просто выкинуть лишний предмет из инвентаря.

Также, в инвентаре могут храниться бумаги, переданные игроку и находится кнопка «Создать новую бумагу». Одинарный клик по бумаге открывает меню прочтения данной бумаги. Двойной клик по хранящейся в инвентаре бумаге переводит игрока в интерфейс редактирования бумаги. Кнопка создаёт новый предмет, бумагу и также переводит игрока из инвентаря в интерфейс редактирования бумаги.

1.1.2.2 Снаряжение
Как уже говорилось выше, есть два слота снаряжения — брони и оружия. Броня влияет на колличество повреждений, получаемых персонажем игрока при атаке по нему. Формула расчёта может быть любой сложности, начиная от простого уменьшения урона на определённую величину и закачивая защитой от определённых видов урона в разной степени. Помещение оружия в соотвествующий слот приводит к выбору этого оружия, дальнейшие атаки игрока будут совершаться этим оружием. Выбранные оружие и броня отображаются спрайтами поверх спрайта персонажа игрока.

1.1.2.3 Боевая система
Боевая система основана на столкновениях между спрайтами: спрайтом атакуемой сущности и спрайтом атакующей сущности. Атакующие сущности возникают кратковременно, это либо пули дальнобойного оружия, либо анимированная зона поражения оружия ближнего боя. Атакуемые сущности это персонажи игроков, мобы, боссы и здания. У каждой атакуемой сущности есть запас здоровья, у каждой атакующей сущности есть значение и тип урона. При коллизии сущностей происходит расчёт нанесённого урона, изменяющийся в зависимости от атакуемой сущности (напр. брони персонажа) и типа урона, но в общем случае сводящейся к вычитанию значения урона из здоровья.

В качестве основной отправной точки для баланса всей системы, стандартное значение здоровья персонажа игрока составляет 100 единиц.

1.1.2.4 Игровой чат
Игровой чат представляет из себя стандартный интернет-чат, однако, сообщения должны отображаться только игрокам, которые находятся в прямой видимости (пределах одного игрового экрана) от отправителя. Таким образом, например, если отправить сообщение в отсутствии других игроков рядом с собой, оно не отобразится никому, кроме самого отправителя.

1.1.2.5 Смерть и возрождение
Смерть персонажа игрока наступает при достижении значения 0 здоровья в результате атак, совершаемых в отношении персонажа. При этом на экран проигравшему игроку выводится соотвествующее сообщение, а тем временем в игре пробадает спрайт игрока и всё содержимое его инвентаря разбрасывается на земле в небольшой зоне вокруг места смерти. Через несколько секунд после смерти наступает возрождение. Игрок возрващается к своему персонажу который, с полным здоровьем и без вещей, оказывается либо в глобальной точке спавна, либо в специально назначенном для этого здании.

1.1.2.6 Выход из игры
Персонаж игрока, вышедшего из игры при помощи игрового меню или закрытия клиента игры извне, должен быть доступен для взаимодействия ещё одну минуту, после чего пропасть из игрового мира. При следующем входе в игру игрок продолжает игру либо с того же места и сохранив такие параметры как инвентарь, значение здоровья и т.д., либо, если был убит за вышеупомянутую минуту, со своей точки возрождения, с обновлёнными инвентарём и здоровьем, как при любой другой смерти.

1.1.2.7 Игровое расстояние
Игровое расстояние считается в тайлах. Размер одного тайла в пикселах — это квадрат, в который можно вписать круг стандартного спрайта персонажа игрока. Таким образом, расстояние в игре можно также мерить напрямую в «кружочках». Точкой расположения игрового объекта будут его координаты в N тайлов по оси X и N тайтлов по оси Y. На точке 0.0 расположена «нулевая точка», от которой происходят расчёты расстояний генерации предметов, мобов и пр., а также указана глобальная точка спавна.

1.1.2.8 Модерация и гейм-мастеринг
Модераторы и гейм-мастера — особая категория пользователей игры, имеющая доступ к сильно отличному от основных игроков функионалу.

Модератор должен иметь возможность просматривать весь чат сервера, незавимисо от точки мира, в которой было отправлено каждое сообщение, а также возможности применения санкций к игрокам, пишущим в чат, с выборкой по сообщению: удаление сообщения, показ игроку диалогового окна, содержащего предупреждение, принудительный выход из игры игрока и блокировка игрока (удаление его учётной записи из игры и запрет на создание новой с данного IP-адреса). В версии чата модератора также выводятся тексты всех бумаг, написанных на сервере и имеется возможность в качестве санкции за их написание удалить указанную бумагу из игрового мира.

Гейм-мастер должен иметь возможность просматривать весь игровой мир сервера, перемещаясь значительно быстрее обычного игрока и без взаимодействия в игровыми объектами, создавать любой игровой объект в заданной им точке, удалять любой игровой объект, изменять здоровье любого игрового объекта, имеющего такой параметр (включая персонажей игроков), перемещать персонажей игроков в произвольную точку и проигрывать различную музыку либо всем игрокам на сервере либо в определённой зоне.

1.1.2.9 ID предметов
ID — это глобальная система идентификаторов игровых объектов, которая упрощает организацию контента игры на всех уровнях разработки и работу гейм-мастеров. Следующие объекты имеют свой идентификатор: здания, оружие, броня, мобы, боссы, декорации, бумаги и игровая валюта. Для каждой валюты, созданной игроками, автоматически генерируется новый идентификатор. Для каждой бумаги, созданной игроками, автоматически генерируется новый идентификатор, для удобства организации (ожидается, что бумаг игроки будут создавать очень много) начинающийся с префикса P и имеющий свою нумерацию ID, начиная с P0.

Каждый идентификатор должен быть уникален и принадлежать только одному игровому объекту, однако в игровом мире может быть множество копий объекта с одним ID.

1.1.2.10 Учётные записи
Игра позволяет создавать учётные записи, состоящие из пары логин-пароль, данных персонажа игрока (инвентаре, положении в игровом мире, скине и пр.) и IP-адреса регистрации. При заходе на сервер игроку должно предлагаться ввести пару логин-пароль или зарегистрировать новую. После регистрации, пара логин-пароль используется для идентификации учётной записи игрока и предоставления ему возможности вернуться к игре с последнего места, в котором тот её закончил. Также, учётные записи используются для блокировки игроков, т.к. хрянят IP-адрес, с которого произведена регистрация. Игрок, однако, не ограничен в создании множественных учётных записей на сервере и игре на множестве серверов.

1.1.2.11 Искусственный интеллект
Искусственный интеллект различен для мобов и боссов.

Каждый моб, при своём появлении, определяет ближайшую цель — либо ближайшего игрока, либо ближайшее здание, построенное игроками. После этого моб начинает прямолинейно кратчайшим путём двигаться к своей цели. Если моб имеет только ближнюю атаку, то постарается подойти к ней вполтную, если имеет дальнюю атаку, то постарается занять позицию в 5 тайлов от цели. Мобы должны также реагировать на агрессию: в случае успешной атаки со стороны игрока, моб выбирает своей новой целью атаковавшего игрока.

Искусственный интеллект боссов построен на защите определённой территории. В момент спавна босса определяется территория, которую он будет защищать: квадрат 50х50 вокруг игрока, местоположение которого вызвало генерацию босса. В очерченном квадрате, босс будет стремиться атаковать ближайшего к себе игрока или отвечать на агрессию, также, как это делают мобы. Однако, босс не станет покидать свою територию и в случае отсуствия на ней игроков в течение 5 минут самопроизвольно исчезнет из игрового мира.

1.1.2.12 Z-уровни и хитбоксы
Z-уровни и хитбоксы — абстракции, позволяющие обсчитывать коллизии объектов. Каждый игровой объект имеет хитбокс — область пространства, которая используется для расчёта столкновений с ним. В общем случае, чаще всего она равна области отрисовки спрайта объекта. Хитбоксы расположены на нескольких Z-уровнях, — слоях пространства, используемых для определения, какие объекты будут сталкиваться или перекрывать друг друга.

Если хитбоксы объектов расположены на одном Z-уровне, при перемещении друг к другу объекты сталкиваются. Это означает, в частности, что персонажи игроков не могут пройти через препятствия, расположенные на одном уровне с хитбоксом персонажа игрока, а также что хитбоксы атакующих сущностей (пуль, зон поражения бл. оружия) и целей атаки должны сталкиваться на одном Z-уровне для обсчёта атаки.

Если хитбоксы объектов расположены на разных Z-уровнях, то они, во-первых, могут свободно перемещаться друг через друга, а во-вторых при перемещении объектов друг к другу один объект будет перекрывать другой. Это означает, что спрайт объекта, находящегося на более высоком Z-уровне будет визуально перекрывать спрайт объекта, находящегося на более низком Z-уровне.

1.1.2.13 Декорации
Декорации — это тип игровых объектов, которые несут эстетическую или сюжетную нагрузку и могут появиться в игре только при помощи спавна гейм-мастером или пред-размещённые на игровой карте. Декорации могут находиться на различных Z-уровнях и, таким образом, служить или не служить препятствием для передвижения игроков, мобов и т.д. Также могут существовать комплексные декорации: это — несколько декораций, связанных друг с другом по смыслу, но расположенных на разных Z-уровнях, таким образом, различные части комплексой декорации будут по-разному взаимодействовать друг с другом и прочими игровыми объектами.

1.1.2.14 Игровая карта и локации
Игровая карта — пространство, в котором происходит игра. Перемещение игроков ограничено пределами игровой карты, все объекты так же размещаются в пределах игровой карты. Игровая карта представляет собой квадрат со стороной в 100 тайлов. В различных местах карты, до действий любых игроков и гейм-мастеров размещены различные декоракции, некоторые из которых уникальны и не доступны для установки гейм-мастером. Совокупность различных декораций составляет Локации игры.

1.1.2.15 Игровые скины
Скины — набор доступных для выбора спрайтов персонажа игрока. Каждый скин представляет из себя один из множества существующих вариантов ПЕКА-фейса, который должен, однако, присываться в круг, а значит стандартный тайл игры. Выбор скина доступен в любой момент игры вызовом меню скинов. После выбора скина, он сохраняется как часть данных о персонаже игрока и в дальнейшем персонаж игрока для всех игроков отображается спрайтом выбранного скина.

1.1.2.16 Язык игры
В игре доступно два языка — русский и английский. Весь текст в игре, хранимый на стороне клиента, должен быть представлен на обоих языках.

1.1.3 Управление

1.1.3.1 Базовое управление
Стрелки и WASD — перемещение по осям X и Y в пространстве.

Указатель мыши — перемещение прицела: указатель и есть прицел, атака происходит в сторону указателя.

Левая кнопка мыши — атака и подбор предметов.

I — вызов инвентаря.

O — вызов меню строительства.

P — вызов торгового меню.

U — вызов меню скинов.

Enter — вызов чата, затем отправка сообщения в чате.

Колёсико мыши (при открытом чате) — вертикальная прокрутка чата.

Вся клавиатура (при открытом чате) — набор сообщения в чате.

ESC — закрыть текущее меню. Если ни одного не открыто, то вызов игрового меню.

1.1.3.2 Управление в режимах меню
Указатель и левая кнопка мыши — выбор пунктов меню.

1.1.3.3 Управление в режиме строительства (при открытом меню строительства)
Стрелки и WASD — то же, что и в базовом.

Указатель и левая кнопка мыши — выбор пунктов меню или существующей постройки.

Указатель (при выбранной постройке) — выбор места строительства.

Левая кнопка мыши (при выбранной постройке) — разметить строительство.

Правая кнопка мыши (при выбранной постройке) — отменить выбор.

Колёсико мыши (при выбраной постройке) — повернуть будущее здание.

Правая кнопка мыши — снос строения, указанного указателем.

1.1.4 Меню

1.1.4.1 Меню инвентаря
Меню инвентаря предназначено для взаимодействия с абстракциями инвентаря и снаряжения. 100 слотов инвентаря в нём разделено на 5 страниц по 20 слотов, которые можно переключать между собой, также постоянно доступны слоты оружия и брони. Перемещение предметов между слотами происходит путём левого клика по предмету, при этом он оказывается в состоянии перемещения и теперь вынут из слота и следует за курсором игрока, и последующим кликом по новому слоту. С выбранным предметом под курсором остаётся возможность кликнуть не только на новый слот для него, но и на переключатель страниц (таким образом, у игрока имеется возможность организовывать инвентарь по страницам). Также в меню инвентаря имеется счётчик текущего количества игровой валюты у игрока.

1.1.4.2 Меню строительства
Меню строительства состоит из списка зданий, доступных для постройки, каждое из которых обозначается его миниатюрным изображением и названием, при наведении курсора мыши на пункт списка всплывает краткое описание здания. Меню имеет вертикальную прокрутку для умещения всех возможных зданий в игре. По левому клику на пункт меню игрок переходит в режим размещения здания: под курсором появляется полу-прозрачный силуэт будущего здания, а меню со списком пропадает с экрана, игра дожидается левого или правого клика мыши, как уже описано в разделе Управление. После клика на экран возвращается меню.

1.1.4.3 Игровой чат
Зона игрового чата разделена на сам чат и строку ввода. Чат представляет собой список сообщений, которые были видны определённому игроку в течение игровой сессии. Новые сообщения появляются в самом низу чата, старые постепенно прокручиваются наверх, вплоть до потери из видимости при достижении границы чата. В связи с этим, при открытии чата как указано в разделе Управление, доступна вертикальная прокрутка сообщений. В строке ввода набирается текст сообщения игрока перед его отправкой. Сообщение может быть неограниченного размера. Если оно визуально не умещается в строку ввода, активируется её горизонтальная прокрутка и становится видно только последнюю набранную чать сообщения, но отправлено оно будет целиком.

1.1.4.4 Торговое меню
Торговое меню вызывается при активации обмена меюду двумя игроками. Для этого персонажи игроков должны подойти вплотную друг к другу (соприкоснуться спрайтами) и один из игрокоу нажать соответствующую клавишу как описано в разделе Управление. Второму игроку при этом выводится сообщение о предложенном обмене, на которое можно согласиться или отвергнуть его также с клавиатуры и не прерывая управление персонажем (такии образом, предложение обмена не выйдеть абьюзить для остановки игроков). В случае, если предложение об обмене было принято, обоим игрокам участникам обмена выводится само торговое меню.

Торговое меню разделено на три зоны, одна широкая расположжена в нижней его части, две другие в верхней. В нижней зоне выводится инвентарь игрока, просматривающего меню. В левую зону можно перетаскивать предметы из инвентаря, там же расположена кнопка «Согласиться». В правой зоне выводятся предметы, выложенные аналогичным образом вторым игроком, участником обмена, и располагается индикатор нажатия им собственной кнопки «Согласиться».

Для совершения обмена, игрокам следует выложить в доступные слоты меню предметы для обмена и, когда содержимое обоих сторон меню устраивает игрока, он должен нажать кнопку «Согласиться». Если второй игрок после этого меняет содержимое своего поля, согласие первого игрока отменяется. Если оба игрока нажали «Согласиться», наконец, совершается обмен: предметы, выложенные в меню одним игроком оказываются в инвентаре другого и наоборот.

При перемещении в слот меню игровой валюты, игроку выдаётся микро-меню с выбором, сколько валюты вытащить из инвентаря. Допускается также дарение предметов, то есть заполнение слотов меню только одним игроком. Для этого также оба игрока должны нажать «Согласиться».

1.1.4.5 Игровое меню
Игровое меню состоит из нескольких пунктов: Продолжить, Выйти и Настройки.

Пункт «Продолжить» закрывает данное меню.

Пункт «Выйти» выводит окно, спрашивающее у игрока подтверждение действия, и, в случае подтверждения, прекращает игру как описано выше и возвращает игрока в главное меню.

Пункт «Настройки» предоставляет доступ к игровым настройкам и возможность вернуться назад к Игровому меню.

1.1.4.6 Меню скинов
Меню скинов предоставляет выбор скина игрока. Оно представляет из себя список всех скинов в игре с вертикальной прокруткой. По двойному щелчку на любой скин происходит его выбор и меню закрывается. 

1.1.5 Система генерации предметов
У каждого предмета брони или оружия есть параметр редкости, состоящий из трёх чисел. Первые два числа определяют разброс расстояния от нулевой точки, на котором может сгенерироваться данный предмет. Таким образом, более редкие предметы появляются на большем расстоянии от спавна. Третье число определяет вероятность спавна. Оно участвует в проверке того, какой предмет будет сгенерирован.

Раз в 10 минут сервер игры проводит проверку на генерацию, состоящую из нескольких этапов. Первым этапом является определение зоны генерации. Во время него определяется зона из секторов размером в квадрат 20х20 тайлов вокруг каждого игрока на сервере. Вторым этапом определяется случайная (с нормальным распределением) точка в отведённой зоне и считывается значение её расстояния от нулевой. Третим этапом происходит проверка по всему списку возможных предметов, определяющая какие из них могут быть сгенерированы на этом расстоянии. Четвёртым этапом, из выбранных определяется предмет для генерации, также случайным образом, но с использованием их значений вероятности. Наконец, последний и пятый этап — предмет появляется в игре.

1.1.6 Система генерации мобов
Также, как у оружия и брони, у каждого моба есть параметр редкости, состоящий из трёх чисел. Первые два числа определяют разброс расстояния от нулевой точки, на котором может сгенерироваться данный моб. Таким образом, более сильные мобы появляются на большем расстоянии от спавна. Третье число определяет вероятность спавна. Оно участвует в проверке того, какой моб будет сгенерирован.

10 раз в минуту сервер игры проводит проверку на генерацию, состоящую из нескольких этапов. Сразу следует заметить, что они схожи с этапами генерации пердметов, но их на один больше. Первым этапом является определение зоны генерации. Во время него определяется зона из секторов размером в квадрат 20х20 тайлов вокруг каждого игрока на сервере. Вторым этапом определяется случайная (с нормальным распределением) точка в отведённой зоне и считывается значение её расстояния от нулевой. Третим этапом происходит проверка по всему списку возможных мобов, определяющая какие из них могут быть сгенерированы на этом расстоянии. Четвёртым этапом, из выбранных определяется моб для генерации, также случайным образом, но с использованием их значений вероятности. Пятым этапом выбирается случайное число от 1 до 10, определяющее, сколько мобов появится. Наконец, последний и шестой этап — моб или мобы появляются в игре.

1.1.7 Система встреч с боссами
У каждого босса есть параметр расстояния, состоящий из двух чисел. Этот параметр означает разброс расстояния в тайлах, на котором может появиться данный босс. У каждого игрока, покинувшего зону в 50х50 тайлов вокруг любого здания и точки 0.0 существует постоянный 10% шанс встретить босса. Реализуется он системно.

Раз в 5 минут игра проводит проверку на генерацию босса, состоящую из нескольких этапов. Первым этапом определяется зона, в которой не может сгенерироваться босс и определяется список игроков, покинувших данную зону. Вторым этапом против каждого игрока в списке проводится проверка, случайно, с нормальным распределением, на 10% шанс появления босса. Третим этапом определяется, есть ли игроки, прошедшие данную проверку и если они отсуствуют, генерация завершается на данном этапе. Четвёртым этапом определяется, сколько игроков прошли проверку, и если их более одного, проводится дополнительная проверка на выбор случайного, с нормальным распределением, игрока из этого суженного списка. Пятым этапом определяется и сохраняется зона битвы в 50х50 тайлов вокруг точки, в которой находился игрок на момент данного этапа. Шестым этапом против той же точки проводится проверка по всему списку возможных для генерации боссов, определяющая, какие из них могут быть сгенерированы на данном расстоянии. Седьмым этапом определяется случайный, с нормальным распределением, босс из списка возможных. Восьмым этапом определяется точка в 10 тайлов дальше от игрока по направлению, в котором на настоящий момент ориентирован персонаж игрока. Девятым и последним этапом в данной точке появляется босс.

Сочетание генерации босса на некотором расстоянии и стандартного поведения ИИ босса должна приводить к тому, что у игрока появляется впечатление, будто босс «вышел» на него из недоступной области игрового мира.

При нахождении любого игрока в 50х50 зоне действия битвы с боссом, в верхней средней части экрана должно показываться имя босса и полоска его здоровья.

При путешествии игроков на достаточное расстояние от зданий и точки спавна, в верхней левой части экрана выводится сообщение, сообщающее, в зону действия каких боссов входит игрок (для этого проводятся проверки, схожие с настоящей генерацией босса, описанной выше).

После убийства босса, проводится проверка на лут, с него выпадающий. Первым этапом определяется случайное, от 1 до 10, количество выпадающих предметов. Вторым этапом проводится проверка по спискам оружия и брони на то, какие могут быть сгенерированы на данном растоянии от нулевой точки. Третьим этапом определяется список предметов с вероятностью генерации меньше 50% и выше 10% и их вероятность генерации для дальнейших проверок умножается на 2. Четвёртым этапом определяется список предметов с вероятностью генерации меньше 10% и их вероятность генерации по для дальнейших проверок умножается на 10. Наконец, пятым этапом генерируется заданное количество предметов, по списку с обновлёнными вероятностями генерации. Таким образом, шанс выпадения редких предметов с босса существенно выше, чем при обычной генерации предметов.

1.1.8 Главное меню
Главное меню должно появляться первым игровым экраном при открытии приложения игры. Оно предоставляет доступ к базовому фунционалу игры и состоит из фонового изображения нескольких кнопок:

«Войти в игру» — переводит игрока в под-меню входа в игру. Данное под-меню в первую очередь предоставляет выбор сервера из двух пунктов: официальный русский и ввод данных собственного сервера. Если выбран последний пункт, предоставляется под-меню ввода данных сервера, состоящего из имени, IP и порта. После выбора сервера, так или иначе, появляется под-меню ввода пары логин-пароль или регистрации новых. При выборе регистрации происходит переход к очередному под-меню, предлагающему ввести новую пару логин-пароль. Наконец, после регистрации или входа в уже существующий аккаунт, игра переходит от главного меню с данным по-меню к загрузке непосредственно игрового процесса и подключению к серверу.

«Настройки» — переводит игрока в отдельное меню, предоставляющее функционал настроек и возможность вернуться назад в главное меню.

«Выйти из игры» — предоставляет доступ к завершению приложения игры.

«Язык» — предоставляет доступ к выбору языка игры, русскому или английскому.

Кроме этого, в главном меню играет фоновая музыка, заглавная тема игры.

1.1.9 Настройки
Меню настроек, вызванное из игрового или главного меню, должно предоставлять доступ к следующим настройкам:

Раздельная громкость мастер-канала (общая громкость), канала музыки и канала игровых эффектов с возможностью установки на значение 0.
Настройка гаммы изображения, с наличием проверочной картинки из разных градаций серого.
Выбор разрешения экрана.
Выбор оконного или полноэкранного режима.

1.1.10 Приветственный экран
Приветственный экран показывается игроку сразу после включения приложения игры. Он представляет собой логотип студии на чёрном фоне, сначала за 1 секунду медленно появляющийся из темноты, затем 2 секунды находящийся на экране и, наконец, за 1 секунду медленно исчезающий в темноте. После проигрывания данной анимации происходит переход к главному меню.

1.1.11 Саундтрек
Звуковое оформление игры имеет несколько состояний. Первый из них, как уже указывалось выше — проигрывание заглавной темы игры в главном меню. Тема проигрывается по кругу.

Второе и основное состояние игры, в которое она входит сразу после загрузки игрового мира — проигрывание эмбиента. Эмбиент состоит из нескольких композиций, из которых клиент игры выбирает случайную и проигрывает до конца, затем процесс выбора повторяется. 

Третье состояние игры — проигрывание музыки, выбранной гейм-мастером. Это состояние вызывается в клиенте игры со стороны сервера игры. Область проигрывания музыки, выбранной гейм-мастером, в разных случаях, может составлять весь игровой мир (музыка проигрывается всем игрокам на сервере), или область 100х100 тайлов в точке, указанной гейм-мастером.

1.1.2.12 Система документооборота
Игра предоставляет игрокам возможность создавать внутриигровые бумаги и вести игровой документооборот. Как уже писалось выше, новая бумага создаётся из меню Инвентаря, при этом для каждой бумаги создаётся уникальный ID. В дальнейшем сервер использует этот ID для хранения текста бумаги.

Интерфейс редактирования бумаги, также вызываемый из Инвентаря, состоит из двух полей.

В первом поле, верхнем, вводится заголовок бумаги. В дальнейшем, введённый заголовок используется как название предмета этой бумаги в инвентаре игрока.

Во втором поле, нижнем, вводится текст бумаги. Поле должно поддерживать вертикальную прокрутку, для ввода длинных текстов. Текст должен поддерживать следующую разметку:

*текст* — Курсив
**текст** — Полужирный
-текст- — Зачёркнутый
> текст — цитата зелёным текстом
[sign] — Уникальная подпись игрока

Для редактирования доступен только тот текст, который создан в данной сессии редактирования. Текст, написанный в предыдущие сессии редактирования должен отображаться серым и быть доступен только для зачёркивания (символы кроме - не вводятся).

Подписи игроков на сервере хранятся в виде шифрованной части текста, явно указывающей, какой игрок поставил данную подпись, а на стороне клиента, при прочтении бумаги, расшифровывается в подпись в виде ника игрока синим текстом. Таким образом, невозможно сгенерировать не свою подпись, а каждая сгенерированная подпись явно указывает, что игрок поставил её по своей воле.

В дальнейшем, после редактирования, доступно прочтение данной бумаги. Оно открывает простое меню, где выводится заголовок и текст данной бумаги.

1.1.2.13 Определение языка
Игра должна автоматически определять язык ОС пользователя при своём первом запуске и устанавливать язык игры соотвественно. Если системный язык — русский, украинский или белорусский, то устанавливается русский язык игры, во всех иных случаях — английский.

1.2 ГЛАВА ВТОРАЯ: Контент

1.2.1 Оружие
Шаблон
Разброс редкости:
Процент редкости:
Скорострельность:
Урон:
Дополнительные особенности:
Игровое описание:
Техническое описание:

Стартовый питолет
Редкость: не генерируется, выдаётся персонажу игрока при генерации
Скорострельность: 1 выстрел раз в 2 секунды
Урон: 20
Дополнительные особнности: нет
Игровое описание: «9мм пистолет, простой как два болта и надёжный»
Техническое описание: копия 9мм пистолета из игры Fallout

АК-74
Разброс редкости: 20-30
Процент редкости: 80%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Наиболее распространнённая модификация Автомата Калашникова»
Техническое описание: Стандартный АК-74 с серповидным магазином

АКМ
Разброс редкости: 20-30
Процент редкости: 80%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Устаревшая модификация Автомата Калашникова»
Техническое описание: Стандартный АКМ с серповидным магазином

АКСУ
Разброс редкости: 20-30
Процент редкости: 80%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Укороченая модификация Автомата Калашникова, до Апокалипсиса характерная для правоохранительных органов»
Техническое описание: АКС-74У с серповидным магазином и рамочным прикладом в сложенном положении

АК 1949
Разброс редкости: 20-30
Процент редкости: 20%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Редкая ранняя модификация Автомата Калашникова»
Техническое описание: Стандартный АК обр. 1949 с серповидным магазином

Винтовка Мосина
Разброс редкости: 30-40
Процент редкости: 80%
Скорострельность: 1 выстрел в секунду
Урон: 25
Дополнительные особенности: После звука выстрела проигрывается звук передёргивания затвора.
Игровое описание: «Надёжная и простая винтовка Мосина обр. 1930 года»
Техническое описание: Стандартная винтовка Мосина обр. 1930 года

Винтовка Мосина обр. 1891
Разброс редкости: 30-40
Процент редкости: 20%
Скорострельность: 1 выстрел в секунду
Урон: 25
Дополнительные особенности: После звука выстрела проигрывается звук передёргивания затвора.
Игровое описание: «Редкая нынче модификация винтовки Мосина, выпущенная до Первой Мировой Войны, обр. 1891 года»
Техническое описание: Стандартная винтовка Мосина обр. 1891 года

Товарищ Мосин
Разброс редкости: 30-40
Процент редкости: 0.1%
Скорострельность: 1 выстрел в секунду
Урон: 100
Дополнительные особенности: После звука выстрела проигрывается звук передёргивания затвора. После попадания пуля летит дальше и всего может поразить до трёх целей, стоящих в ряд.
Игровое описание: «Только кажется мне, лучше слова «товарищ» ничего не нашёл я на этой Земле»
Техническое описание: Стандартная винтовка Мосина обр. 1891 года с перемотанным синей изолентой прикладом и повязанным на ствол алым бантом. Иконка в инвентаре переливается золотым.

Двухствольное ружьё
Разброс редкости: 40-50
Процент редкости: 50%
Скорострельность: 2 выстрела в секунду, затем кулдаун 1 секунда
Урон: 40
Дополнительные особенности: нет
Игровое описание: «Классическое двухствольное охотничье ружьё»
Техническое описание: Двухствольное ружьё с деревянным прикладом, напоминающее двухстволку из игры DOOM 2016.

Двухствольный обрез
Разброс редкости: 40-50
Процент редкости: 30%
Скорострельность: 2 выстрела в секунду, затем кулдаун 1 секунда
Урон: 50
Дополнительные особенности: нет
Игровое описание: «Кажется, один безумец использовал такой»
Техническое описание: Двуствольное ружьё с обрезанным до 1/3 длинны стволом и обрезанным до пистолетной рукояти прикладом.

1.2.2 Броня

1.2.3 Здания

1.2.3.1 Монетный двор
Здание имеет размер 5х3 тайла и 1000 единиц здоровья. Визуально представляет собой двор, со всех сторон окружённый бетонной коллонадой, напоминающей исторические здания Амстердамской и Лондонской бирж, обветшалого вида.

При постройке здания, после его расположения, игроку предоставляется микро-меню с выбором валюты, генерируемой в здании. Изначально оно выглядит как список всех созданных игроками на сервере валют, ранжированный по их популярности (чем больше единиц соотвествующей валюты существует на сервере, тем она выше в списке), а также кнопка «Создать новую». При создании новой валюты сначала возникает микро-меню с подтверждением этого акта, а в случае согласия — ещё одно, с вводом названия валюты, после ввода названия — третье, с выбором иконки валюты из небольшого предоставленного списка. После выбора валюты здание окончательно создаётся и строится.

Интерфейс монетного двора доступен только создателю здания и открывется путём прикосновения к нему. При открытии меню здания, у игрока должна сохраняться возможность управлять своим персонажем при помощи WASD/стрелок, таким образом он может отойти от монетного двора и закрыть его меню. Интерфейс содержит только поле для ввода, принимающее исключительно цифры, и кнопку «Эмитировать». После ввода любого числа и нажатия кнопки, указанное числом колличество игровой валюты генерируется в инвентаре игрока.

1.2.3.2 Личный дом
Здание имеет размер 2х3 тайла и 500 единиц здоровья. Имеет несколько спрайтов. Каждый из них визуально представляет собой различные строения, представляющие собой жилые дома либо построенные целиком из подручных материалов, либо раннее разрушенные и восстановленные подручными матералами из руин.

При постройке здания, после его расположения, игроку предлагается меню с выбором спрайта для здания.

Интеракция с личным домом возможна только для игрока, построившего его, для всех остальных игроков здание представляет лишь препятствие движению и цель для атаки. Владелец здания может «войти» в него, столкнувшись со зданием и продолжив движение в его направлении. При этом персонаж игрока пропадает из игрового мира, а в центре экрана оказывается здание. Игроку, вошедшему в здание, предоставляется меню инвентаря здания: меню разделено на две части, в верхней предоставлено 30 слотов инвентаря самого здания, в нижней предоставлен доступ к обычному инвентарю игрока, с горизонтальной прокруткой. Игрок может «положить» в здание любой предмет из своего инвентаря. При открытии меню здания, у игрока должна сохраняться возможность управлять своим персонажем при помощи WASD/стрелок, таким образом он может в любой момент «выйти» из здания.

В случае разрушения здания, все сохранённые в нём предметы и вошедший игрок выпадают обратно в игровой мир. 

1.2.3.3 Тред
Здание имеет размер 2х3 тайла и 500 единиц здоровья. Имеет несколько спрайтов. Каждый из них визуально представляет собой различные строения, представляющие собой нежилые помещения (конторы, места общепита, оказания услуг и пр.) либо построенные целиком из подручных материалов, либо раннее разрушенные и восстановленные подручными матералами из руин. Поверх спрайта каждого треда находится надпись с названием треда.

При постройке здания, после его расположения, игроку предлагается меню с выбором спрайта для здания и выбором названия здания. 

Интеракция с тредом возможна для любых игроков. Каждый игрок может «войти» в здание, столкнувшись с ни и продолжив движение в его направлении. При этом персонаж игрока пропадает из игрового мира, а в центре экрана оказывается здание. Игроку, вошедшему в здание, предоставляется меню треда, разделённое на три части. Верхние две части предоставляют доступ к инвентарю здания из 10 слотов и личному инвенатрю игрока с горизонтальной прокруткой. Игрок может «положить» в здание любой предмет из своего инвентаря, при этом он будет доступен любому другому игроку, также вошедшему в здание. Нижняя часть представляет собой подобие игрового чата, однако, с расширенными возможностями.

Чат треда сохраняет свою историю навсегда. Для оптимизации, при заходе в тред игроку загружаются последние 10 сообщений, более ранние подгружаются при вертикальной прокрутке вверх. В чате треда доступно прикрепление картинок, загружаемых с жёсткого диска игрока. При загрузке на сервер любая картинка должна быть сжата на стороне клиента до размера меньше 1 мегабайта. В чате треда доступна разметка, такая же, как в системе Документооборота.

При открытии меню здания, у игрока должна сохраняться возможность управлять своим персонажем при помощи WASD/стрелок, таким образом он может в любой момент «выйти» из здания.

В случае разрушения здания, все сохранённые в нём предметы и вошедшие игроки выпадают обратно в игровой мир, а история чата удаляется. 

1.2.3.4 Стена
Здание имеет размер в 1 тайл и 300 единиц здоровья. Визуально представляет собой один сектор стены из бетонных панелей, с колючей проволокой сверху стены.

Здание не имеет никакого функционала, кроме того, что мешает проходу игроков/мобов и поглощает атаки, происходящие в её сторону. 

1.2.3.5 Туррель против мобов
Здание имеет размер в 1 тайл и 250 единиц здоровья. Визуально представляет собой толстый столб с пулемётом, установленным на его вершине.

Турель атакует любых мобов, вошедших в радиус действия турели. Зона действия турели — круг радиусом в 10 тайлов, оружие турели имеет скорострельность 5 выстрелов в секунду и урон 10 единиц.

1.2.3.6 Турель против PVP
Здание имеет размер в 1 тайл и 250 единиц здоровья. Визуально представляет собой толстый столб с пулемётом, установленным на его вершине.

Турель атакует любого игрока, совершившего успешную атаку на другого игрока в зоне действия турели. Таким образом, жертва нападения остаётся в безопасности (если только не решит ответить), а нападающий, теоретически, должен быть вынужден переключить своё внимание на турель. Зона действия турели — круг радиусом в 10 тайлов, оружие турели имеет скорострельность 5 выстрелов в секунду и урон 10 единиц.

1.2.3.7 Турель для защиты зданий
Здание имеет размер в 1 тайл и 250 единиц здоровья. Визуально представляет собой толстый столб с пулемётом, установленным на его вершине.

Турель атакует любого моба или игрока, совершившего успешную атаку на любое здание в зоне действия турели. Зона действия турели — круг радиусом в 10 тайлов, оружие турели имеет скорострельность 5 выстрелов в секунду и урон 10 единиц.

1.2.4 Мобы
Шаблон
Разброс редкости:
Процент редкости:
Тип атаки:
Урон атаки:
Здоровье:
Описание:

Рак
Разброс редкости: 10-20
Процент редкости: 80%
Тип атаки: Ближняя
Урон атаки: 50
Здоровье: 40
Описание: Гигансткий рак ярко-красного цвета. Атакует клешнями.

Школьник
Разброс редкости: 10-20
Процент редкости: 80%
Тип атаки: Дальняя
Урон атаки: 50
Здоровье: 40
Описание: Ребёнок в мужской школьной форму с большим рюкзаком за спиной и маской Гая Фокса на лице, держащий двухствольное ружьё. Атакует выстрелами из ружья.

Сыч
Разброс редкости: 20-50
Процент редкости: 80%
Тип атаки: Ближняя
Урон атаки: 60
Здоровье: 50
Описание: Гигантская сова, похожая на вид Athene Noctua (Сыч домовой). Атакует когтями.

Шизик
Разброс редкости: 20-50
Процент редкости: 50%
Тип атаки: Дальняя
Урон атаки: 60
Здоровье: 50
Описание: Кружочек с мемом «шизик» вместо мема «Пека-фейс». Атакует кусочками говна.

1.2.5 Боссы


1.2.6 Декорации
Невидимая стена
Имеет размер в 1 тайл и хитбокс на одном Z-уровне с персонажами игроков. Ообладает следующей особенностью: для игроков она отображается как пустое пространство (не имеет спрайта, а только хитбокс), а для гейм-мастеров как полностью залитый розовым цветом тайл. Это позволяет широко применять невидимые стены для самых различных целей, например, можно нарисовать декорацию скалы и окружить её с трёх сторон невидимыми стенами, это простое и элегентное решение создаст у игрока иллюзию подъёма на более высокое место. Также, невидимомыми стенами окружена с краёв карта мира.

1.2.7 Локации

1.2.7.1 Карта игры

1.2.8 Музыка

1.2.8.1 Заглавная тема игры
Заглавная тема игры является кавером на песню «Гимн партии большевиков» с неизменной музыкой и изменёнными словами. Текст песни следующий:

Борды небывалой ехидные дети,
Сегодня мы жёлтую песню поём
О братии самой батхёртной на свете,
О самом большом ПЕКА-фейсе своём.

Припев:
Всеми откормленна, вайпами спаяна,
Тролль анонимно во веки веков,
ЙОБА огромная, ЙОБА прекрасная —
Ехидная ЙОБА бордовиков!

Борда нам родная, живи в Интернетах,
Могучий оплот ехидных идей!
Стоит грозным рядом армада анонов,
Картошечки жёлтые всяких мастей!

Припев

Рачья и сосницких гнилую породу
Отведаешь сытно, вбросив как Бог!
Ты – дух всех анонов, душа ты анона,
Ты – светило анона, ты – личина его!

Припев

И каждого школьника пламенный анус
До самого неба стрегламши вознёс.
Дорогою к вину шагаем по тредам,
И ЙОБА великий по ней нас ведёт!

Припев

1.2.8.2 Эмбиент

1.2.8.3 Композиции, доступные гейм-мастеру

1.2.9 Панели модератора и гейм-мастера

2. ТЕХНИЧЕСКИЕ СПЕЦИФИКАЦИИ