1. ФУНКЦИОНАЛЬНОЕ ОПИСАНИЕ

1.1 ГЛАВА ПЕРВАЯ: Базовый геймлпей (Core gameplay)

1.1.1 Базовое описание
В центре экрана всегда находится персонаж игрока, поверх которого видно его снаряжение, движение происходит перемещением игрового пространства относительно неподвижного персонажа. В левом нижнем углу постоянно виден чат. В правом нижнем углу постоянно виден счётчик здоровья игрока. Игровые меню при их вызове возникают сверху по центру экрана, перекрывая собой игровое пространство.

1.1.2 Базовые абстракции

1.1.2.1 Инвентарь
Инвентарь игрока состоит из 100 слотов, каждый из которых может занимать игровой предмет. При подборе предмета он помещается в один из свободных слотов инвентаря. Предметы можно перемещать между слотами, а помещать в слот брони и слот оружия, а также выбрасывать обратно в игровое пространство (путём перемещения предмета за пределы окна инвентаря). Если свободные слоты закончились, а игрок пытается подобрать предмет, ему должна быть показана ошибка. Если игрок пытается поместить несоотвествующий предмет в слот брони или оружия, он должен просто не помещаться (по клику ничего не происходит).

Помимо предметов снаряжения, инвентарь может также содержать различные игровые валюты. Это единственные предметы инвентаря, имеющие счётчик количества. Каждый вид игровой валюты занимает один слот инвентаря и имеет свой счётчик количества.

Чтобы подобрать предмет оружия или брони, должно быть достаточно коснуться его. Предполагается, что если это было нежелательно, в дальнейшем игрок может просто выкинуть лишний предмет из инвентаря.

1.1.2.2 Снаряжение
Как уже говорилось выше, есть два слота снаряжения — брони и оружия. Броня влияет на колличество повреждений, получаемых персонажем игрока при атаке по нему. Формула расчёта может быть любой сложности, начиная от простого уменьшения урона на определённую величину и закачивая защитой от определённых видов урона в разной степени. Помещение оружия в соотвествующий слот приводит к выбору этого оружия, дальнейшие атаки игрока будут совершаться этим оружием. Выбранные оружие и броня отображаются спрайтами поверх спрайта персонажа игрока.

1.1.2.3 Боевая система
Боевая система основана на столкновениях между спрайтами: спрайтом атакуемой сущности и спрайтом атакующей сущности. Атакующие сущности возникают кратковременно, это либо пули дальнобойного оружия, либо анимированная зона поражения оружия ближнего боя. Атакуемые сущности это персонажи игроков, мобы, боссы и здания. У каждой атакуемой сущности есть запас здоровья, у каждой атакующей сущности есть значение и тип урона. При коллизии сущностей происходит расчёт нанесённого урона, изменяющийся в зависимости от атакуемой сущности (напр. брони персонажа) и типа урона, но в общем случае сводящейся к вычитанию значения урона из здоровья.

В качестве основной отправной точки для баланса всей системы, стандартное значение здоровья персонажа игрока составляет 100 единиц.

1.1.2.4 Игровой чат
Игровой чат представляет из себя стандартный интернет-чат, однако, сообщения должны отображаться только игрокам, которые находятся в прямой видимости (пределах одного игрового экрана) от отправителя. Таким образом, например, если отправить сообщение в отсутствии других игроков рядом с собой, оно не отобразится никому, кроме самого отправителя.

1.1.2.5 Смерть и возрождение
Смерть персонажа игрока наступает при достижении значения 0 здоровья в результате атак, совершаемых в отношении персонажа. При этом на экран проигравшему игроку выводится соотвествующее сообщение, а тем временем в игре пробадает спрайт игрока и всё содержимое его инвентаря разбрасывается на земле в небольшой зоне вокруг места смерти. Через несколько секунд после смерти наступает возрождение. Игрок возрващается к своему персонажу который, с полным здоровьем и без вещей, оказывается либо в глобальной точке спавна, либо в специально назначенном для этого здании.

1.1.2.6 Выход из игры
Персонаж игрока, вышедшего из игры при помощи игрового меню или закрытия клиента игры извне, должен быть доступен для взаимодействия ещё одну минуту, после чего пропасть из игрового мира. При следующем входе в игру игрок продолжает игру либо с того же места и сохранив такие параметры как инвентарь, значение здоровья и т.д., либо, если был убит за вышеупомянутую минуту, со своей точки возрождения, с обновлёнными инвентарём и здоровьем, как при любой другой смерти.

1.1.2.7 Игровое расстояние
Игровое расстояние считается в тайлах. Размер одного тайла в пикселах — это квадрат, в который можно вписать круг стандартного спрайта персонажа игрока. Таким образом, расстояние в игре можно также мерить напрямую в «кружочках». Точкой расположения игрового объекта будут его координаты в N тайлов по оси X и N тайтлов по оси Y. На точке 0.0 расположена «нулевая точка», от которой происходят расчёты расстояний генерации предметов, мобов и пр., а также указана глобальная точка спавна.

1.1.2.8 Модерация и гейм-мастеринг
Модераторы и гейм-мастера — особая категория пользователей игры, имеющая доступ к сильно отличному от основных игроков функионалу.

Модератор должен иметь возможность просматривать весь чат сервера, незавимисо от точки мира, в которой было отправлено каждое сообщение, а также возможности применения санкций к игрокам, пишущим в чат, с выборкой по сообщению: удаление сообщения, показ игроку диалогового окна, содержащего предупреждение, принудительный выход из игры игрока и блокировка игрока (удаление его учётной записи из игры и запрет на создание новой с данного IP-адреса).

Гейм-мастер должен иметь возможность просматривать весь игровой мир сервера, перемещаясь значительно быстрее обычного игрока и без взаимодействия в игровыми объектами, создавать любой игровой объект в заданной им точке, удалять любой игровой объект, изменять здоровье любого игрового объекта, имеющего такой параметр (включая персонажей игроков), перемещать персонажей игроков в произвольную точку и проигрывать различную музыку либо всем игрокам на сервере либо в определённой зоне.

1.1.2.9 ID предметов
ID — это глобальная система идентификаторов игровых объектов, которая упрощает организацию контента игры на всех уровнях разработки и работу гейм-мастеров. Следующие объекты имеют свой идентификатор: здания, оружие, броня, мобы, боссы, декорации и игровая валюта. Для каждой валюты, созданной игроками, автоматически генерируется новый идентификатор. Каждый идентификатор должен быть уникален и принадлежать только одному игровому объекту, однако в игровом мире может быть множество копий объекта с одним ID. 

1.1.2.10 Учётные записи
Игра позволяет создавать учётные записи, состоящие из пары логин-пароль, данных персонажа игрока (инвентаре, положении в игровом мире и пр.) и IP-адреса регистрации. При заходе на сервер игроку должно предлагаться ввести пару логин-пароль или зарегистрировать новую. После регистрации, пара логин-пароль используется для идентификации учётной записи игрока и предоставления ему возможности вернуться к игре с последнего места, в котором тот её закончил. Также, учётные записи используются для блокировки игроков, т.к. хрянят IP-адрес, с которого произведена регистрация. Игрок, однако, не ограничен в создании множественных учётных записей на сервере и игре на множестве серверов.

1.1.2.11 Искусственный интеллект
Искусственный интеллект различен для мобов и боссов.

Каждый моб, при своём появлении, определяет ближайшую цель — либо ближайшего игрока, либо ближайшее здание, построенное игроками. После этого моб начинает прямолинейно кратчайшим путём двигаться к своей цели. Если моб имеет только ближнюю атаку, то постарается подойти к ней вполтную, если имеет дальнюю атаку, то постарается занять позицию в 5 тайлов от цели. Мобы должны также реагировать на агрессию: в случае успешной атаки со стороны игрока, моб выбирает своей новой целью атаковавшего игрока.

Искусственный интеллект боссов построен на защите определённой территории. В момент спавна босса определяется территория, которую он будет защищать: квадрат 50х50 вокруг игрока, местоположение которого вызвало генерацию босса. В очерченном квадрате, босс будет стремиться атаковать ближайшего к себе игрока или отвечать на агрессию, также, как это делают мобы. Однако, босс не станет покидать свою територию и в случае отсуствия на ней игроков в течение 5 минут самопроизвольно исчезнет из игрового мира.

1.1.2.12 Z-уровни и хитбоксы
Z-уровни и хитбоксы — абстракции, позволяющие обсчитывать коллизии объектов. Каждый игровой объект имеет хитбокс — область пространства, которая используется для расчёта столкновений с ним. В общем случае, чаще всего она равна области отрисовки спрайта объекта. Хитбоксы расположены на нескольких Z-уровнях, — слоях пространства, используемых для определения, какие объекты будут сталкиваться или перекрывать друг друга.

Если хитбоксы объектов расположены на одном Z-уровне, при перемещении друг к другу объекты сталкиваются. Это означает, в частности, что персонажи игроков не могут пройти через препятствия, расположенные на одном уровне с хитбоксом персонажа игрока, а также что хитбоксы атакующих сущностей (пуль, зон поражения бл. оружия) и целей атаки должны сталкиваться на одном Z-уровне для обсчёта атаки.

Если хитбоксы объектов расположены на разных Z-уровнях, то они, во-первых, могут свободно перемещаться друг через друга, а во-вторых при перемещении объектов друг к другу один объект будет перекрывать другой. Это означает, что спрайт объекта, находящегося на более высоком Z-уровне будет визуально перекрывать спрайт объекта, находящегося на более низком Z-уровне.

1.1.2.13 Декорации
Декорации — это тип игровых объектов, которые несут эстетическую или сюжетную нагрузку и могут появиться в игре только при помощи спавна гейм-мастером. Декорации могут находиться на различных Z-уровнях и, таким образом, служить или не служить препятствием для передвижения игроков, мобов и т.д. Также могут существовать комплексные декорации: это — несколько декораций, связанных друг с другом по смыслу, но расположенных на разных Z-уровнях, таким образом, различные части комплексой декорации будут по-разному взаимодействовать друг с другом и прочими игровыми объектами.

1.1.3 Управление

1.1.3.1 Базовое управление
Стрелки и WASD — перемещение по осям X и Y в пространстве.

Указатель мыши — перемещение прицела: указатель и есть прицел, атака происходит в сторону указателя.

Левая кнопка мыши — атака и подбор предметов.

I — вызов инвентаря.

O — вызов меню строительства.

P — вызов торгового меню.

Enter — вызов чата, затем отправка сообщения в чате.

Колёсико мыши (при открытом чате) — вертикальная прокрутка чата.

Вся клавиатура (при открытом чате) — набор сообщения в чате.

ESC — закрыть текущее меню. Если ни одного не открыто, то вызов игрового меню.

1.1.3.2 Управление в режимах меню
Указатель и левая кнопка мыши — выбор пунктов меню.

1.1.3.3 Управление в режиме строительства (при открытом меню строительства)
Стрелки и WASD — то же, что и в базовом.

Указатель и левая кнопка мыши — выбор пунктов меню или существующей постройки.

Указатель (при выбранной постройке) — выбор места строительства.

Левая кнопка мыши (при выбранной постройке) — разметить строительство.

Правая кнопка мыши (при выбранной постройке) — отменить выбор.

Колёсико мыши (при выбраной постройке) — повернуть будущее здание.

Правая кнопка мыши — снос строения, указанного указателем.

1.1.4 Меню

1.1.4.1 Меню инвентаря
Меню инвентаря предназначено для взаимодействия с абстракциями инвентаря и снаряжения. 100 слотов инвентаря в нём разделено на 5 страниц по 20 слотов, которые можно переключать между собой, также постоянно доступны слоты оружия и брони. Перемещение предметов между слотами происходит путём левого клика по предмету, при этом он оказывается в состоянии перемещения и теперь вынут из слота и следует за курсором игрока, и последующим кликом по новому слоту. С выбранным предметом под курсором остаётся возможность кликнуть не только на новый слот для него, но и на переключатель страниц (таким образом, у игрока имеется возможность организовывать инвентарь по страницам). Также в меню инвентаря имеется счётчик текущего количества игровой валюты у игрока.

1.1.4.2 Меню строительства
Меню строительства состоит из списка зданий, доступных для постройки, каждое из которых обозначается его миниатюрным изображением и названием, при наведении курсора мыши на пункт списка всплывает краткое описание здания. Меню имеет вертикальную прокрутку для умещения всех возможных зданий в игре. По левому клику на пункт меню игрок переходит в режим размещения здания: под курсором появляется полу-прозрачный силуэт будущего здания, а меню со списком пропадает с экрана, игра дожидается левого или правого клика мыши, как уже описано в разделе Управление. После клика на экран возвращается меню.

1.1.4.3 Игровой чат
Зона игрового чата разделена на сам чат и строку ввода. Чат представляет собой список сообщений, которые были видны определённому игроку в течение игровой сессии. Новые сообщения появляются в самом низу чата, старые постепенно прокручиваются наверх, вплоть до потери из видимости при достижении границы чата. В связи с этим, при открытии чата как указано в разделе Управление, доступна вертикальная прокрутка сообщений. В строке ввода набирается текст сообщения игрока перед его отправкой. Сообщение может быть неограниченного размера. Если оно визуально не умещается в строку ввода, активируется её горизонтальная прокрутка и становится видно только последнюю набранную чать сообщения, но отправлено оно будет целиком.

1.1.4.4 Торговое меню
Торговое меню вызывается при активации обмена меюду двумя игроками. Для этого персонажи игроков должны подойти вплотную друг к другу (соприкоснуться спрайтами) и один из игрокоу нажать соответствующую клавишу как описано в разделе Управление. Второму игроку при этом выводится сообщение о предложенном обмене, на которое можно согласиться или отвергнуть его также с клавиатуры и не прерывая управление персонажем (такии образом, предложение обмена не выйдеть абьюзить для остановки игроков). В случае, если предложение об обмене было принято, обоим игрокам участникам обмена выводится само торговое меню.

Торговое меню разделено на три зоны, одна широкая расположжена в нижней его части, две другие в верхней. В нижней зоне выводится инвентарь игрока, просматривающего меню. В левую зону можно перетаскивать предметы из инвентаря, там же расположена кнопка «Согласиться». В правой зоне выводятся предметы, выложенные аналогичным образом вторым игроком, участником обмена, и располагается индикатор нажатия им собственной кнопки «Согласиться».

Для совершения обмена, игрокам следует выложить в доступные слоты меню предметы для обмена и, когда содержимое обоих сторон меню устраивает игрока, он должен нажать кнопку «Согласиться». Если второй игрок после этого меняет содержимое своего поля, согласие первого игрока отменяется. Если оба игрока нажали «Согласиться», наконец, совершается обмен: предметы, выложенные в меню одним игроком оказываются в инвентаре другого и наоборот.

При перемещении в слот меню игровой валюты, игроку выдаётся микро-меню с выбором, сколько валюты вытащить из инвентаря. Допускается также дарение предметов, то есть заполнение слотов меню только одним игроком. Для этого также оба игрока должны нажать «Согласиться».

1.1.4.5 Игровое меню
Игровое меню состоит из нескольких пунктов: Продолжить, Выйти и Настройки.

Пункт «Продолжить» закрывает данное меню.

Пункт «Выйти» выводит окно, спрашивающее у игрока подтверждение действия, и, в случае подтверждения, прекращает игру как описано выше и возвращает игрока в главное меню.

Пункт «Настройки» предоставляет доступ к игровым настройкам и возможность вернуться назад к Игровому меню.

1.1.5 Система генерации предметов
У каждого предмета брони или оружия есть параметр редкости, состоящий из трёх чисел. Первые два числа определяют разброс расстояния от нулевой точки, на котором может сгенерироваться данный предмет. Таким образом, более редкие предметы появляются на большем расстоянии от спавна. Третье число определяет вероятность спавна. Оно участвует в проверке того, какой предмет будет сгенерирован.

Раз в 10 минут сервер игры проводит проверку на генерацию, состоящую из нескольких этапов. Первым этапом является определение зоны генерации. Во время него определяется зона из секторов размером в квадрат 20х20 тайлов вокруг каждого игрока на сервере. Вторым этапом определяется случайная (с нормальным распределением) точка в отведённой зоне и считывается значение её расстояния от нулевой. Третим этапом происходит проверка по всему списку возможных предметов, определяющая какие из них могут быть сгенерированы на этом расстоянии. Четвёртым этапом, из выбранных определяется предмет для генерации, также случайным образом, но с использованием их значений вероятности. Наконец, последний и пятый этап — предмет появляется в игре.

1.1.6 Система генерации мобов
Также, как у оружия и брони, у каждого моба есть параметр редкости, состоящий из трёх чисел. Первые два числа определяют разброс расстояния от нулевой точки, на котором может сгенерироваться данный моб. Таким образом, более сильные мобы появляются на большем расстоянии от спавна. Третье число определяет вероятность спавна. Оно участвует в проверке того, какой моб будет сгенерирован.

10 раз в минуту сервер игры проводит проверку на генерацию, состоящую из нескольких этапов. Сразу следует заметить, что они схожи с этапами генерации пердметов, но их на один больше. Первым этапом является определение зоны генерации. Во время него определяется зона из секторов размером в квадрат 20х20 тайлов вокруг каждого игрока на сервере. Вторым этапом определяется случайная (с нормальным распределением) точка в отведённой зоне и считывается значение её расстояния от нулевой. Третим этапом происходит проверка по всему списку возможных мобов, определяющая какие из них могут быть сгенерированы на этом расстоянии. Четвёртым этапом, из выбранных определяется моб для генерации, также случайным образом, но с использованием их значений вероятности. Пятым этапом выбирается случайное число от 1 до 10, определяющее, сколько мобов появится. Наконец, последний и шестой этап — моб или мобы появляются в игре.

1.1.7 Система встреч с боссами

1.1.8 Главное меню

1.1.9 Настройки

1.1.10 Саундтрек

1.2 ГЛАВА ВТОРАЯ: Контент

1.2.1 Оружие

1.2.1.1 Оружие ближнего боя

1.2.1.2 Оружие дальнего боя
Шаблон
Разброс редкости:
Процент редкости:
Скорострельность:
Урон:
Дополнительные особенности:
Игровое описание:
Техническое описание:

АК-74
Разброс редкости: 20-30
Процент редкости: 80%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Наиболее распространнённая модификация Автомата Калашникова»
Техническое описание: Стандартный АК-74 с серповидным магазином

АКМ
Разброс редкости: 20-30
Процент редкости: 80%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Устаревшая модификация Автомата Калашникова»
Техническое описание: Стандартный АКМ с серповидным магазином

АКСУ
Разброс редкости: 20-30
Процент редкости: 80%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Укороченая модификация Автомата Калашникова, до Апокалипсиса характерная для правоохранительных органов»
Техническое описание: АКС-74У с серповидным магазином и рамочным прикладом в сложенном положении

АК 1949
Разброс редкости: 20-30
Процент редкости: 20%
Скорострельность: 2 выстрела в секунду
Урон: 10
Дополнительные особенности: Нет
Игровое описание: «Редкая ранняя модификация Автомата Калашникова»
Техническое описание: Стандартный АК обр. 1949 с серповидным магазином

Винтовка Мосина
Разброс редкости: 30-40
Процент редкости: 80%
Скорострельность: 1 выстрел в секунду
Урон: 25
Дополнительные особенности: После звука выстрела проигрывается звук передёргивания затвора.
Игровое описание: «Надёжная и простая винтовка Мосина обр. 1930 года»
Техническое описание: Стандартная винтовка Мосина обр. 1930 года

Царская винтовка Мосина
Разброс редкости: 30-40
Процент редкости: 20%
Скорострельность: 1 выстрел в секунду
Урон: 25
Дополнительные особенности: После звука выстрела проигрывается звук передёргивания затвора.
Игровое описание: «Редкая нынче модификация винтовки Мосина, выпущенная до Первой Мировой Войны, обр. 1891 года»
Техническое описание: Стандартная винтовка Мосина обр. 1891 года

Товарищ Мосин
Разброс редкости: 30-40
Процент редкости: 0.1%
Скорострельность: 1 выстрел в секунду
Урон: 100
Дополнительные особенности: После звука выстрела проигрывается звук передёргивания затвора. После попадания пуля летит дальше и всего может поразить до трёх целей, стоящих в ряд.
Игровое описание: «Только кажется мне, лучше слова «товарищ» ничего не нашёл я на этой Земле»
Техническое описание: Стандартная винтовка Мосина обр. 1891 года с перемотанным синей изолентой прикладом и повязанным на ствол алым бантом. Иконка в инвентаре переливается золотым.

1.2.2 Броня

1.2.3 Здания

1.2.3.1 Работа
Здание имеет размер 2х3 тайла и 500 единиц здоровья. Визуально представляет собой значительно обветшалое заводское здание.

При постройке здания, после его расположения, игроку предоставляется микро-меню с выбором валюты, генерируемой в здании. Изначально оно выглядит как список всех созданных игроками на сервере валют, ранжированный по их популярности (чем больше единиц соотвествующей валюты имеется на сервере, тем она выше в списке), а также кнопка «Создать новую». При создании новой валюты сначала возникает микро-меню с подтверждением этого акта, а в случае согласия — ещё одно, с вводом названия валюты. После выбора валюты здание окончательно создаётся и строится.

Здание работы позволяет войти в него одновременно не более трём игрокам. Персонажи вошедших в здание игроков исчезают из игрового мира, а игроки получают вид на здание по центру экрана. Для входа в здание достаточно подойти к нему вплотную, тогда игроку будет выведено на экран либо диалог подтверждения/отказа от входа в здание, либо сообщение, что в здании уже работают три игрока. Чтобы выйти из здания, достаточно нажать любую клавишу перемещения и персонаж окажется снаружи здания с указанной клавишей стороны.

Игрок, работающий на работе, получает 1 единицу игровой валюты за каждые полные 10 минут нахождения внутри. Выход из здания до истечение 10 минут прерывает прогресс, при повторном входе в здание таймер вновь начнётся с 10 минут. Во время нахождения персонажа игрока в здании, над ним появляется полоса прогрузки, отсчиывающая время до генерации следующей единицы валюты.

Использование зданий работы является единственным средством генерации (эмиссии) валюты в игре, в дальнейшем валюта может только обмениваться, но не получаться в чистом виде никаким другим способом, кроме этого.

1.2.3.2 Биржа

1.2.3.3 Личный дом

1.2.3.4 Стена
Здание имеет размер в 1 тайл и 300 единиц здоровья. Визуально представляет собой один сектор стены из бетонных панелей, с колючей проволокой сверху стены.

Здание не имеет никакого функционала, кроме того, что мешает проходу игроков/мобов и поглощает атаки, происходящие в её сторону. 

1.2.3.5 Туррель против мобов
Здание имеет размер в 1 тайл и 250 единиц здоровья. Визуально представляет собой толстый столб с пулемётом, установленным на его вершине.

Турель атакует любых мобов, вошедших в радиус действия турели. Зона действия турели — круг радиусом в 10 тайлов, оружие турели имеет скорострельность 5 выстрелов в секунду и урон 10 единиц.

1.2.3.6 Турель против PVP
Здание имеет размер в 1 тайл и 250 единиц здоровья. Визуально представляет собой толстый столб с пулемётом, установленным на его вершине.

Турель атакует любого игрока, совершившего успешную атаку на другого игрока в зоне действия турели. Таким образом, жертва нападения остаётся в безопасности (если только не решит ответить), а нападающий, теоретически, должен быть вынужден переключить своё внимание на турель. Зона действия турели — круг радиусом в 10 тайлов, оружие турели имеет скорострельность 5 выстрелов в секунду и урон 10 единиц.

1.2.3.7 Турель для защиты зданий
Здание имеет размер в 1 тайл и 250 единиц здоровья. Визуально представляет собой толстый столб с пулемётом, установленным на его вершине.

Турель атакует любого моба или игрока, совершившего успешную атаку на любое здание в зоне действия турели. Зона действия турели — круг радиусом в 10 тайлов, оружие турели имеет скорострельность 5 выстрелов в секунду и урон 10 единиц.

1.2.3.8 Личный тред

1.2.4 Мобы
Рак

Сыч

Шизик

1.2.5 Боссы

1.2.6 Музыка

1.2.7 Панели модератора и гейм-мастера